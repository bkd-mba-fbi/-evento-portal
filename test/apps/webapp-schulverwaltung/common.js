"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[592],{1178:(T,I,e)=>{e.d(I,{S9:()=>f,sm:()=>x,ok:()=>v});var s=e(4012);class u{constructor(n,i,l){this.TeacherInformation=n,this.LessonDateTimeFrom=i,this.LessonDateTimeTo=l,this.lessons=[]}addLesson(n){this.lessons.some(i=>(0,s.In)(i,n))||(this.lessons.push(n),this.updateId(),this.updateStudyClassNumbers(),this.updateEventDesignations())}getIds(){return[...new Set(this.lessons.map(n=>n.LessonRef.Id))]}getEventIds(){return[...new Set(this.lessons.map(n=>n.EventRef.Id))]}updateId(){this.id=[...new Set(this.lessons.map(n=>n.LessonRef.Id).sort())].join("-")}updateStudyClassNumbers(){this.studyClassNumbers=[...new Set(this.lessons.map(n=>n.StudyClassNumber).sort((n,i)=>n.localeCompare(i)))].join(", ")}updateEventDesignations(){this.eventDesignations=[...new Set(this.lessons.map(n=>n.EventDesignation).sort())].join(", ")}}var d=e(2641),a=e(953),t=e(833);function m(o,n){(0,t.Z)(2,arguments);var i=(0,a.Z)(o),l=(0,a.Z)(n);return i.getTime()<l.getTime()}function c(o,n){(0,t.Z)(2,arguments);var i=(0,a.Z)(o).getTime(),l=(0,a.Z)(n.start).getTime(),y=(0,a.Z)(n.end).getTime();if(!(l<=y))throw new RangeError("Invalid interval");return i>=l&&i<=y}function x(o){return v(o).reduce((n,i)=>{const l=n.find(D=>function g(o,n){return null===o&&null===n||null!==o&&null!==n&&o.TeacherInformation===n.TeacherInformation&&o.LessonDateTimeFrom.getTime()===n.LessonDateTimeFrom.getTime()&&o.LessonDateTimeTo.getTime()===n.LessonDateTimeTo.getTime()}(D,i));if(l)return l.addLesson(i),n;const y=function E(o){const n=new u(o.TeacherInformation,o.LessonDateTimeFrom,o.LessonDateTimeTo);return n.addLesson(o),n}(i);return[...n,y]},[]).sort(s.kM)}function f(o){if(0===o.length)return null;const n=new Date;if(o=[...o].sort(s.kM),(0,d.Z)(n,o[0].LessonDateTimeFrom)){for(const i of o)if(m(n,i.LessonDateTimeFrom)||c(n,{start:i.LessonDateTimeFrom,end:i.LessonDateTimeTo}))return i;return o[o.length-1]}return o[0]}function v(o){return o.reduce((n,i)=>n.some(l=>(0,s.In)(l,i))?n:[...n,i],[])}},368:(T,I,e)=>{e.d(I,{w:()=>u});var s=e(4650),g=e(6895);function E(d,a){if(1&d){const t=s.EpF();s.TgZ(0,"button",5),s.NdJ("click",function(){s.CHM(t);const c=s.oxw();return s.KtG(c.valueChange.emit(""))}),s.TgZ(1,"i",2),s._uU(2,"clear"),s.qZA()()}}let u=(()=>{class d{constructor(){this.value="",this.disabled=!1,this.valueChange=new s.vpe}}return d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=s.Xpm({type:d,selectors:[["erz-resettable-input"]],inputs:{value:"value",disabled:"disabled",placeholder:"placeholder",label:"label"},outputs:{valueChange:"valueChange"},decls:6,vars:5,consts:[[1,"input-group"],["id","resettable-input",1,"input-group-text"],[1,"material-icons"],["type","text","aria-describedby","resettable-input",1,"form-control",3,"value","disabled","keyup"],["class","btn btn-link text-decoration-none","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-link","text-decoration-none",3,"click"]],template:function(t,m){1&t&&(s.TgZ(0,"div",0)(1,"span",1)(2,"i",2),s._uU(3,"search"),s.qZA()(),s.TgZ(4,"input",3),s.NdJ("keyup",function(x){return m.valueChange.emit(x.target.value)}),s.qZA(),s.YNc(5,E,3,0,"button",4),s.qZA()),2&t&&(s.xp6(4),s.Q6J("value",m.value)("disabled",m.disabled),s.uIk("placeholder",m.placeholder)("aria-label",m.label),s.xp6(1),s.Q6J("ngIf",m.value))},dependencies:[g.O5],styles:["input[_ngcontent-%COMP%]{padding-right:2.5em}button[_ngcontent-%COMP%]{position:absolute;right:0;z-index:3}"]}),d})()},7467:(T,I,e)=>{e.d(I,{H:()=>C});var s=e(5275),g=e(9610),E=e(1297),u=e(8547),d=e(7579),a=e(2722),t=e(4650),m=e(2039),c=e(8980),x=e(6895),f=e(1104),v=e(2925),o=e(646);function n(r,p){if(1&r&&t._UZ(0,"erz-dossier-grades-view",3),2&r){const h=t.oxw().erzLet;t.Q6J("courses",h.courses)("studentId",h.studentId)("gradingScales",h.gradingScales)}}function i(r,p){1&r&&(t.ynx(0),t._UZ(1,"erz-spinner"),t.BQk())}function l(r,p){if(1&r&&(t.ynx(0),t.YNc(1,n,1,3,"erz-dossier-grades-view",1),t.YNc(2,i,2,0,"ng-container",2),t.BQk()),2&r){const h=p.erzLet;t.xp6(1),t.Q6J("ngIf",!h.loading),t.xp6(1),t.Q6J("ngIf",h.loading)}}const y=function(r,p,h,L){return{studentId:r,loading:p,courses:h,gradingScales:L}},C={path:"student/:id",children:[{path:"",component:g.H,children:[{path:"addresses",component:u.S},{path:"absences",component:E.t},{path:"grades",component:(()=>{class r{constructor(h,L){this.state=h,this.dossierGradesService=L,this.destroy$=new d.x}ngOnInit(){this.state.currentDossier$.next("grades"),this.state.studentId$.pipe((0,a.R)(this.destroy$)).subscribe(h=>this.dossierGradesService.setStudentId(h))}ngOnDestroy(){this.destroy$.next()}}return r.\u0275fac=function(h){return new(h||r)(t.Y36(m.j),t.Y36(c.S))},r.\u0275cmp=t.Xpm({type:r,selectors:[["erz-dossier-grades"]],decls:5,vars:14,consts:[[4,"erzLet"],[3,"courses","studentId","gradingScales",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales"]],template:function(h,L){1&h&&(t.YNc(0,l,3,2,"ng-container",0),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&h&&t.Q6J("erzLet",t.l5B(9,y,t.lcZ(1,1,L.state.studentId$),t.lcZ(2,3,L.dossierGradesService.loading$),t.lcZ(3,5,L.dossierGradesService.studentCourses$),t.lcZ(4,7,L.dossierGradesService.gradingScales$)))},dependencies:[x.O5,f.e,v.O,o.d,x.Ov]}),r})()}]},{path:"absences/confirm",component:s.A}]}},77:(T,I,e)=>{e.d(I,{$:()=>i});var s=e(8029),g=e(9928);const E=g.dt({Id:g.pk,Designation:g.Z_,Number:g.Z_});var u=e(3900),d=e(4004),a=e(2467),t=e(515),m=e(9646),c=e(9975),x=e(2671),f=e(4650),v=e(529),o=e(6188),n=e(1443);let i=(()=>{class l extends x.v{constructor(D,C,r,p){super(D,C,E,"EducationalEvents"),this.translate=r,this.toastService=p,this.typeaheadCodec=g.dt((0,c.e)(this.codec.props,["Id","Designation","Number"]))}getTypeaheadItems(D){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Designation":`~*${D}*`}}).pipe((0,u.w)((0,a.Y0)(this.typeaheadCodec)),(0,d.U)(C=>C.map(r=>({Key:r.Id,Value:`${r.Designation} (${r.Number})`}))))}getTypeaheadItemByKey(D){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Id":`=${D}`}}).pipe((0,u.w)((0,a.Y0)(this.typeaheadCodec)),(0,u.w)(C=>0===C.length?(this.toastService.error(this.translate.instant("global.rest-errors.notfound-message"),this.translate.instant("global.rest-errors.notfound-title")),t.E):(0,m.of)({Key:C[0].Id,Value:`${C[0].Designation} (${C[0].Number})`})))}}return l.\u0275fac=function(D){return new(D||l)(f.LFG(v.eN),f.LFG(s.L6),f.LFG(o.sK),f.LFG(n.k))},l.\u0275prov=f.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},5999:(T,I,e)=>{e.d(I,{O:()=>m});var s=e(3900),g=e(8029),E=e(9529),u=e(2467),d=e(2671),a=e(4650),t=e(529);let m=(()=>{class c extends d.v{constructor(f,v){super(f,v,E.t,"Events")}getSubscriptionDetailsDefinitions(f){return this.http.get(`${this.baseUrl}/${f}/SubscriptionDetails`).pipe((0,s.w)((0,u.Y0)(this.codec)))}getDesignation(f){const v=f.Classes?f.Classes.map(o=>o.Number).join(", "):null;return v?f.Designation+", "+v:f.Designation}}return c.\u0275fac=function(f){return new(f||c)(a.LFG(t.eN),a.LFG(g.L6))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},7283:(T,I,e)=>{e.d(I,{R:()=>m});var s=e(3900),g=e(8029),E=e(8210),u=e(2467),d=e(109),a=e(4650),t=e(529);let m=(()=>{class c extends d.r{constructor(f,v){super(f,v,E.y,"StudyClasses","Number")}getActive(){return this.http.get(`${this.baseUrl}/?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,s.w)((0,u.Y0)(E.y)))}getActiveFormativeAssessments(){return this.http.get(`${this.baseUrl}/FormativeAssessments?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,s.w)((0,u.Y0)(E.y)))}}return c.\u0275fac=function(f){return new(f||c)(a.LFG(t.eN),a.LFG(g.L6))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5186:(T,I,e)=>{e.d(I,{i:()=>g});var s=e(634);function g(u){return Object.keys(u).reduce((d,a)=>{const t=function E(u){return u&&(u instanceof Date?(0,s.Z)(u,"yyyy-MM-dd"):String(u))}(u[a]);return t?{...d,[a]:t}:d},{})}},7746:(T,I,e)=>{e.d(I,{C:()=>E,v:()=>g});var s=e(4788);function g(u,d,a){return u.map(t=>{let c,m=null;return t.TypeRef.Id&&(m=d.find(x=>x.Id===t.TypeRef.Id)||null),t.ConfirmationStateId&&(c=a.find(x=>x.Key===t.ConfirmationStateId)),new s.Oz(t,m,null,c)})}function E(u,d,a){return u?d.filter(t=>a.find(m=>m===t.lessonPresence.StudentRef.Id)):d}},5255:(T,I,e)=>{e.d(I,{P:()=>l});const d=function s(r){return function(p){return r?.[p]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var a=e(7121),t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function l(r,p){return p?r.filter(function y(r){const p=C(r);return h=>D(h.studentFullName,p)||D(h.studyClassNumber,p)||D(h.Designation,p)||D(h.evaluationText,p)}(p)):r}function D(r,p){return!!r&&C(r).includes(p)}function C(r){return function n(r){return(r=(0,a.Z)(r))&&r.replace(t,d).replace(o,"")}(r.toLowerCase())}},1008:(T,I,e)=>{e.d(I,{Z:()=>f});var s=e(6623),g=e(8492),E=e(4825),u=e(4177),d=g.Z?g.Z.isConcatSpreadable:void 0;const t=function a(v){return(0,u.Z)(v)||(0,E.Z)(v)||!!(d&&v&&v[d])},c=function m(v,o,n,i,l){var y=-1,D=v.length;for(n||(n=t),l||(l=[]);++y<D;){var C=v[y];o>0&&n(C)?o>1?m(C,o-1,n,i,l):(0,s.Z)(l,C):i||(l[l.length]=C)}return l},f=function x(v){return null!=v&&v.length?c(v,1):[]}}}]);