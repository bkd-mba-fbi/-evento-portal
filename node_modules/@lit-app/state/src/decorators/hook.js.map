{"version":3,"file":"hook.js","sourceRoot":"","sources":["hook.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,gBAAgB,EAAE,MAAM,0CAA0C,CAAC;AAM5E;;;;;;;;;;;GAWG;AACH,MAAM,UAAU,IAAI,CAAC,QAAgB,EAAE,OAAqB;IAE3D,OAAO,gBAAgB,CAAC;QACvB,gEAAgE;QAChE,QAAQ,EAAE,CAAC,IAAkB,EAAE,IAAY,EAAE,EAAE;YAE9C,MAAM,UAAU,GAAG,MAAM,CAAC,wBAAwB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACzE,IAAI,CAAC,UAAU,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAA;aACpE;YACD,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9C,IAAG,UAAU,EAAE;gBACd,MAAM,IAAI,GAAI,EAAC,GAAG,UAAU,CAAC,IAAI,EAAG,GAAG,EAAC,CAAC,QAAQ,CAAC,EAAE,OAAO,IAAI,EAAE,EAAC,EAAC,CAAA;gBACnE,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,EAAC,GAAG,UAAU,EAAE,GAAG,EAAC,IAAI,EAAE,IAAI,EAAC,EAAC,CAAC,CAAA;aAC5D;QACF,CAAC;KACD,CAAiC,CAAA;AACnC,CAAC","sourcesContent":["\nimport {State } from '../state.js'\nimport { decorateProperty } from '@lit/reactive-element/decorators/base.js';\nimport { PropertySignature } from './property';\n\n\nexport type HookOptions = {[key:string]: unknown}\n\n/**\n * A decorator to be consumed by state hooks. A state hook acts as a interface\n * between state and other services reacting to state change or acting on the state.\n * \n * a hook exposes `toState` and `fromState` methods for handling hte synchronization.\n * \n * For instance, a state can be synced to a remote database, throught this mechanism.\n * \n * \n * @param options \n * @returns \n */\nexport function hook(hookName: string, options?: HookOptions) {\n\t\n\treturn decorateProperty({\n\t\t// @ts-ignore ctor is typof State and not typeof ReactiveElement\n\t\tfinisher: (ctor: typeof State, name: strubg) => {\n\t\t\t\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(ctor.prototype, name);\n\t\t\tif (!descriptor) {\n\t\t\t\tthrow new Error('@hook decorator need to be called after @property')\n\t\t\t}\n\t\t\tconst definition = ctor.propertyMap.get(name);\n\t\t\tif(definition) {\n\t\t\t\tconst hook =  {...definition.hook , ...{[hookName]: options || {}}}\n\t\t\t\tctor.propertyMap.set(name, {...definition, ...{hook: hook}})\n\t\t\t}\n\t\t}\n\t}) as unknown as PropertySignature\n}\n\n"]}